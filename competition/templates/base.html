<!DOCTYPE html>
{% load static %}
{% load competition_template_utils %}
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Checkpoint competition">
    <meta name="author" content="Pijukatel">
    <meta name="generator" content="???">
    <title>Checkpoint competition</title>
    <link rel="stylesheet" type="text/css" href="{% static 'css/base.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/links.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/tables.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/messages.css' %}">

</head>
<body onload="userPositionWorkflow()">
    <main>
        <header>
            {% block header %}
            {% endblock header %}
            <div id="navs">
                <nav id="main_navbar">
                <ul>
                    <li><a href="{% url 'teams' %}">Teams</a></li>
                    <li><a href="{% url 'checkpoints' %}">Checkpoints</a></li>
                    <li><a href="{% url 'users' %}">Users</a></li>

                </ul>
                </nav>

                <nav id="user_navbar">
                    <ul>
                        {%  if user.is_authenticated %}
                            {% team_of_user user as team %}
                                <li> User: <a id="logged_user_link" href="{% url 'user' %}">{{ request.user }}</a></li>
                                <li> <a  href="{% url 'logout' %}">Logout</a></li>
                                {% if team %}
                                    <li> Team: <a id="team_link"  href="{% url 'team' team%}">{{ team }}</a></li>
                                {% else %}
                                    <li> Team: <a  href="{% url 'team_create'%}"> Create new team </a></li>
                                {% endif %}
                        {% else %}
                            <li> User: {{ request.user }} </li>
                            <li> <a  href="{% url 'login' %}">Login</a> </li>
                            <li> <a  href="{% url 'register' %}">Create Account</a> </li>
                        {% endif %}
                    </ul>
                </nav>
            </div>
        </header>

        <section id="content_container">
            <section id="messages">
                {% if messages %}
                    <ul class="messages">
                        {% for message in messages %}
                            <li{% if message.tags %} class="Message_{{ message.tags }}"{% endif %}>{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </section>
            <section id="invitations">
                {% if invitations %}
                    <ul class="invitations">
                        {% for invitation in invitations %}
                            <li class="Message_invitations">
                                Invitation to team <a href="{% url 'team' invitation%}">{{ invitation }}</a>:
                                <a href="{% url 'accept_invitation' invitation%}">Accept</a>
                                or
                                <a href="{% url 'refuse_invitation' invitation%}">Refuse</a>
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </section>
            <section id="content">
                <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>
                <script src="{% static 'js/api.js' %}"></script>
                {% block content %}
                {% endblock content %}
            </section>
        </section>

        <footer>
            {% block footer %}
            {% endblock footer %}
        </footer>
    </main>
</body>

</html>