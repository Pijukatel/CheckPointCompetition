{% extends "base.html" %}
{% load competition_template_utils %}
{% block content %}
    <div class="checkpointTable">
        <div class="tableRow">
            <div id="tableCellDetail">

                <ul>Checkpoint details:
                    <li>Name: {{ checkpoint.name }}</li>
                    <li>Description: {{ checkpoint.description }}</li>
                    <li>Longitudinal: <span id="focusLon">{{ checkpoint.gps_lon }}</span></li>
                    <li>Lateral: <span id="focusLat">{{ checkpoint.gps_lat }}</span></li>
                </ul>

            </div>
            <div id="tableCellMap">
                {% to_list checkpoint as checkpoints%}
                {% include "competition/components/map.html" with objects=checkpoints %}
            </div>
        </div>
    </div>
    <div border="10px" class="checkpointTable">
        <div class="tableRow">
            <div class="cellHalfRow">
                Original
                <img src="{{ checkpoint.photo.url }}" width="100%" height="100%"></img>
            </div>
            <div class="cellHalfRow">
                {% block point %}
                {% endblock point %}
            </div>
        </div>
    </div>

    <script type="text/javascript">
        const iframe = document.getElementsByTagName("iframe")[0]
        const ol = iframe.contentWindow.ol
        const lon = Number(document.getElementById("focusLon").textContent)
        const lat = Number(document.getElementById("focusLat").textContent)
        iframe.onload = function() {setTimeout(() => {iframe.contentWindow.focusOnPoint(lon,lat)},1000)}
    </script>
{% endblock content %}

